{% extends 'base.html' %}
{% load i18n %}
{% load static %}

{% block title %}Ø¥Ù†Ø´Ø§Ø¡ Ù‚ÙŠØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠ{% endblock %}

{% block extra_css %}
<style>
    .journal-form {
        max-width: 1200px;
        margin: 0 auto;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        padding: 10px;
        border: 1px solid #ddd;
        text-align: right;
    }
    input, select, textarea {
        width: 100%;
        padding: 5px;
    }
    .error {
        color: red;
        font-size: 12px;
    }
    .btn {
        padding: 10px 20px;
        margin: 5px;
        cursor: pointer;
    }
</style>
{% endblock %}

{% block content %}
<div class="journal-form">
    <h1>Ø¥Ù†Ø´Ø§Ø¡ Ù‚ÙŠØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠ - Ù†Ø³Ø®Ø© Ù…Ø¨Ø³Ø·Ø© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±</h1>
    
    <form method="post" id="simpleForm">
        {% csrf_token %}
        
        <h2>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù‚ÙŠØ¯</h2>
        <table>
            <tr>
                <th>Ø±Ù‚Ù… Ø§Ù„Ù‚ÙŠØ¯</th>
                <td>{{ form.entry_number }}</td>
            </tr>
            <tr>
                <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                <td>{{ form.entry_date }}</td>
            </tr>
            <tr>
                <th>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø±Ø¬Ø¹</th>
                <td>{{ form.reference_type }}</td>
            </tr>
            <tr>
                <th>Ø§Ù„ÙˆØµÙ</th>
                <td>{{ form.description }}</td>
            </tr>
        </table>
        
        <h2>Ø¨Ù†ÙˆØ¯ Ø§Ù„Ù‚ÙŠØ¯</h2>
        {{ formset.management_form }}
        
        <table>
            <thead>
                <tr>
                    <th>Ø§Ù„Ø­Ø³Ø§Ø¨</th>
                    <th>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¨Ù†Ø¯</th>
                    <th>Ù…Ø¯ÙŠÙ†</th>
                    <th>Ø¯Ø§Ø¦Ù†</th>
                </tr>
            </thead>
            <tbody>
                {% for line_form in formset %}
                <tr>
                    <td>
                        {{ line_form.account }}
                        <div class="error">{{ line_form.account.errors }}</div>
                    </td>
                    <td>
                        {{ line_form.line_description }}
                        <div class="error">{{ line_form.line_description.errors }}</div>
                    </td>
                    <td>
                        {{ line_form.debit }}
                        <div class="error">{{ line_form.debit.errors }}</div>
                    </td>
                    <td>
                        {{ line_form.credit }}
                        <div class="error">{{ line_form.credit.errors }}</div>
                    </td>
                </tr>
                {% if line_form.non_field_errors %}
                <tr>
                    <td colspan="4" class="error">{{ line_form.non_field_errors }}</td>
                </tr>
                {% endif %}
                {% endfor %}
            </tbody>
        </table>
        
        {% if formset.non_form_errors %}
        <div class="error">{{ formset.non_form_errors }}</div>
        {% endif %}
        
        <div style="margin-top: 20px;">
            <button type="submit" class="btn">Ø­ÙØ¸ Ø§Ù„Ù‚ÙŠØ¯</button>
            <a href="{% url 'journal:entry_list' %}" class="btn">Ø¥Ù„ØºØ§Ø¡</a>
        </div>
    </form>
</div>

<script>
// Ù„Ø§ ÙŠÙˆØ¬Ø¯ JavaScript - Ù†Ù…ÙˆØ°Ø¬ Ø¨Ø³ÙŠØ· ÙÙ‚Ø·!
// ÙÙ‚Ø· Ù†Ø·Ø¨Ø¹ Ø§Ù„Ù‚ÙŠÙ… Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„ØªØ´Ø®ÙŠØµ
document.getElementById('simpleForm').addEventListener('submit', function(e) {
    console.log('ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ - Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„ÙØ¹Ù„ÙŠØ©:');
    const formData = new FormData(this);
    for (let [key, value] of formData.entries()) {
        if (key.includes('debit') || key.includes('credit')) {
            console.log(`  ${key} = "${value}"`);
        }
    }
});
</script>
{% endblock %}
