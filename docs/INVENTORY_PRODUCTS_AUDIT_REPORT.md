# ุชูุฑูุฑ ูุญุต ูุธุงู ุงููุณุชูุฏุนุงุช ูุงูููุชุฌุงุช

**ุงูุชุงุฑูุฎ:** `${new Date().toISOString()}`  
**ุงููุธุงู:** Finspilot Accounting System  
**ุงููุญุฏุฉ:** Inventory & Products Management

---

## ๐ ุงูููุฎุต ุงูุชูููุฐู

ุชู ุฅุฌุฑุงุก ูุญุต ุดุงูู ููุธุงู ุงููุณุชูุฏุนุงุช ูุงูููุชุฌุงุช ุดูู:
- โ ุฅูุดุงุก/ุชุนุฏูู/ุญุฐู ุงููุณุชูุฏุนุงุช
- โ ุฅูุดุงุก/ุชุนุฏูู/ุญุฐู ุงููุฆุงุช
- โ ุฅูุดุงุก/ุชุนุฏูู ุงูููุชุฌุงุช ูุน ุฃุฑุตุฏุฉ ุงูุชุชุงุญูุฉ
- โ ุงุฎุชุจุงุฑ ูุณุจ ุถุฑุงุฆุจ ูุฎุชููุฉ
- โ ุงูุชุญูู ูู ุญุฑูุงุช ุงููุฎุฒูู ูุงูุชูุงููู
- โ ุงูุชุญูู ูู ุงูุงูุชุซุงู ูู IFRS

---

## ๐ ุงูุฃุฎุทุงุก ุงูููุชุดูุฉ ูุงูุฅุตูุงุญุงุช

### **ุงูุฎุทุฃ 1: ุนุฏู ุฅูุดุงุก ุญุฑูุงุช ุงููุฎุฒูู ููุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ**

**ุงููุตู:**  
ุนูุฏ ุฅูุดุงุก ููุชุฌ ุจุฃุฑุตุฏุฉ ุงูุชุชุงุญูุฉุ ูุง ูุชู ุฅูุดุงุก ุญุฑูุฉ ูุฎุฒูู (`InventoryMovement`) ุชููุงุฆูุงู.

**ุงูุชุฃุซูุฑ:**  
- ุงูุฑุตูุฏ ุงูุงูุชุชุงุญู ูุง ูุธูุฑ ูู ุญุฑูุงุช ุงููุฎุฒูู
- ูุตุจุญ ุชุชุจุน ุงููุฎุฒูู ุบูุฑ ุฏููู
- ุนุฏู ุงููุฏุฑุฉ ุนูู ุญุณุงุจ ุงูุชูููุฉ ุจุดูู ุตุญูุญ

**ุงูุญู:**
1. ุฅูุดุงุก ููู `products/signals.py` ูุญุชูู ุนูู:
   - `pre_save` signal ูุญูุธ ุงูููู ุงููุฏููุฉ ููููุงุฑูุฉ
   - `post_save` signal ูุฅูุดุงุก/ุชุญุฏูุซ ุญุฑูุฉ ุงููุฎุฒูู ุชููุงุฆูุงู

2. ุฑุจุท ุงูุฅุดุงุฑุงุช ูู `products/apps.py`:
```python
def ready(self):
    import products.signals
```

3. ุฅูุดุงุก ุณูุฑูุจุช `create_opening_balance_movements.py` ููุนุงูุฌุฉ ุงูููุชุฌุงุช ุงูููุฌูุฏุฉ

**ุงููููุงุช ุงููุนุฏูุฉ:**
- `products/signals.py` (ุฌุฏูุฏ)
- `products/apps.py`
- `create_opening_balance_movements.py` (ุฌุฏูุฏ)

---

### **ุงูุฎุทุฃ 2: ุงูุญุณุงุจุงุช ุงููุทููุจุฉ ููููุฏุฉ**

**ุงููุตู:**  
ุงูุญุณุงุจุงุช ุงูุถุฑูุฑูุฉ ููุธุงู ุงููุฎุฒูู ุบูุฑ ููุฌูุฏุฉ:
- `1501` - ุงููุฎุฒูู / Inventory
- `5101` - ุชูููุฉ ุงูุจุถุงุนุฉ ุงููุจุงุนุฉ / Cost of Goods Sold

**ุงูุชุฃุซูุฑ:**  
- ุนุฏู ุงููุฏุฑุฉ ุนูู ุฅูุดุงุก ูููุฏ ุงูููููุฉ ููุฑุตูุฏ ุงูุงูุชุชุงุญู
- ุนุฏู ุชุณุฌูู ุชูููุฉ ุงูุจุถุงุนุฉ ุงููุจุงุนุฉ
- ุนุฏู ุชุชุจุน ูููุฉ ุงููุฎุฒูู ูู ุงูุฏูุงุชุฑ

**ุงูุญู:**
ุฅูุดุงุก ุณูุฑูุจุช `create_inventory_accounts.py` ูุฅูุดุงุก ุงูุญุณุงุจุงุช ุงููุทููุจุฉ ุชููุงุฆูุงู:
- ุญุณุงุจ 1501: ุงููุฎุฒูู (Asset)
- ุญุณุงุจ 5101: ุชูููุฉ ุงูุจุถุงุนุฉ ุงููุจุงุนุฉ (Expense)

**ุงููููุงุช ุงููุนุฏูุฉ:**
- `create_inventory_accounts.py` (ุฌุฏูุฏ)

---

### **ุงูุฎุทุฃ 3: ุฎุทุฃ ุจุฑูุฌู ูู ุงูููุชุฑุฉ**

**ุงููุตู:**  
ูู ููู `test_inventory_deep_audit.py`ุ ุชู ุงุณุชุฎุฏุงู:
```python
products = Product.objects.filter(is_service=False)
```

ุจูููุง `is_service` ูู property ูููุณ ุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.

**ุงูุชุฃุซูุฑ:**  
- ูุดู ุงูุงุฎุชุจุงุฑ ูุน ุฎุทุฃ: `Cannot resolve keyword 'is_service'`

**ุงูุญู:**
ุชุบููุฑ ุงูููุชุฑ ุฅูู:
```python
products = Product.objects.filter(product_type='physical')
```

**ุงููููุงุช ุงููุนุฏูุฉ:**
- `test_inventory_deep_audit.py`

---

### **ุงูุฎุทุฃ 4: ุนุฏู ุฅูุดุงุก ูููุฏ ุงูููููุฉ ููุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ**

**ุงููุตู:**  
ุนูุฏ ุฅูุดุงุก ููุชุฌ ุจุฃุฑุตุฏุฉ ุงูุชุชุงุญูุฉุ ูุง ูุชู ุฅูุดุงุก ููุฏ ููููุฉ ูุญุงุณุจู.

**ุงูุชุฃุซูุฑ:**  
- ุนุฏู ุธููุฑ ูููุฉ ุงููุฎุฒูู ูู ุงูุฏูุงุชุฑ
- ุนุฏู ุชูุงุฒู ููุฒุงู ุงููุฑุงุฌุนุฉ
- ุนุฏู ุงูุงูุชุซุงู ูููุนุงููุฑ ุงููุญุงุณุจูุฉ

**ุงูุญู:**
ูู `products/signals.py`ุ ุชู ุฅุถุงูุฉ ููุทู ูุฅูุดุงุก ููุฏ ููููุฉ:
- ูุฏูู: ุญุณุงุจ ุงููุฎุฒูู (1501)
- ุฏุงุฆู: ุญุณุงุจ ุฑุฃุณ ุงููุงู (301)

**ุงูููุฏ ุงููุญุงุณุจู:**
```
ูู ุญู/ ุงููุฎุฒูู (1501)          XX,XXX.XXX
    ุฅูู ุญู/ ุฑุฃุณ ุงููุงู (301)                XX,XXX.XXX
(ุฅุซุจุงุช ุฑุตูุฏ ุงูุชุชุงุญู ููููุชุฌ)
```

**ุงููููุงุช ุงููุนุฏูุฉ:**
- `products/signals.py`
- `create_opening_balance_movements.py`

---

## โ ุงุฎุชุจุงุฑุงุช ุงููุฌุงุญ

### 1. ุงุฎุชุจุงุฑ ุงููุณุชูุฏุนุงุช
- โ ุชู ุฅูุดุงุก 3 ูุณุชูุฏุนุงุช (ุฑุฆูุณูุ ูุฑุนู 1ุ ูุฑุนู 2)
- โ ุชู ุชุนููู ูุณุชูุฏุน ุงูุชุฑุงุถู
- โ ุชู ุชุนุฏูู ุจูุงูุงุช ุงููุณุชูุฏุน

### 2. ุงุฎุชุจุงุฑ ุงููุฆุงุช
- โ ุชู ุฅูุดุงุก 3 ูุฆุงุช (ุฅููุชุฑูููุงุชุ ุฃุซุงุซุ ุฎุฏูุงุช)
- โ ุงูุชุณูุณู ุงูุชููุงุฆู ูุจุฏุฃ ูู 10000
- โ ุชู ุชุนุฏูู ุจูุงูุงุช ุงููุฆุฉ

### 3. ุงุฎุชุจุงุฑ ุงูููุชุฌุงุช
- โ ุชู ุฅูุดุงุก 3 ููุชุฌุงุช ููุฒูุงุฆูุฉ ุจูุณุจ ุถุฑูุจุฉ ูุฎุชููุฉ (5%ุ 10%ุ 15%ุ 20%)
- โ ุชู ุฅูุดุงุก ููุชุฌ ุฎุฏูู
- โ ุชู ุฑุจุท ุงูููุชุฌุงุช ุจุงููุณุชูุฏุนุงุช
- โ ุชู ุชุณุฌูู ุงูุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ

### 4. ุงุฎุชุจุงุฑ ุญุฑูุงุช ุงููุฎุฒูู
- โ ุชู ุฅูุดุงุก ุญุฑูุงุช ุงููุฎุฒูู ููุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ ุชููุงุฆูุงู
- โ ุชู ุญุณุงุจ ุชูููุฉ ุงููุญุฏุฉ ุจุดูู ุตุญูุญ
- โ ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ = ุงููููุฉ ร ุชูููุฉ ุงููุญุฏุฉ

### 5. ุงุฎุชุจุงุฑ ุงูุญุณุงุจุงุช
**ุงูููุชุฌ 1: ูุงุจุชูุจ**
- ุงูุฑุตูุฏ ุงูุงูุชุชุงุญู: 15 ูุญุฏุฉ
- ุงูุชูููุฉ ุงูุงูุชุชุงุญูุฉ: 45,000 ุฑูุงู
- ุชูููุฉ ุงููุญุฏุฉ: 3,000 ุฑูุงู
- โ current_stock = 15.000
- โ ุงูุญุณุงุจ ุงููุฏูู = 15.000

**ุงูููุชุฌ 2: ุทุงููุฉ ููุชุจ**
- ุงูุฑุตูุฏ ุงูุงูุชุชุงุญู: 20 ูุญุฏุฉ
- ุงูุชูููุฉ ุงูุงูุชุชุงุญูุฉ: 16,000 ุฑูุงู
- ุชูููุฉ ุงููุญุฏุฉ: 800 ุฑูุงู
- โ current_stock = 20.000
- โ ุงูุญุณุงุจ ุงููุฏูู = 20.000

### 6. ุงุฎุชุจุงุฑ ูููุฏ ุงูููููุฉ
- โ ุชู ุฅูุดุงุก ููุฏ ููููุฉ JE-000013 ููููุชุฌ 1
- โ ุชู ุฅูุดุงุก ููุฏ ููููุฉ JE-000014 ููููุชุฌ 2
- โ ุงููููุฏ ูุชูุงุฒูุฉ (ูุฏูู = ุฏุงุฆู)
- โ ุชู ุชุญุฏูุซ ุฃุฑุตุฏุฉ ุงูุญุณุงุจุงุช

### 7. ุงุฎุชุจุงุฑ ุงูุงูุชุซุงู ูู IFRS
- โ ุทุฑููุฉ ุงูุชูููู: FIFO (ูุชูุงูู ูุน IAS 2)
- โ ุชุณุฌูู ุชูููุฉ ุงููุญุฏุฉ
- โ ุฅุฏุงุฑุฉ ุงูุถุฑุงุฆุจ ุจูุณุจ ูุฎุชููุฉ
- โ ุชุชุจุน ุงูุญุฏ ุงูุฃุฏูู ูููููุฉ
- โ ุชุชุจุน ุงููุณุชูุฏุนุงุช ุงููุชุนุฏุฏุฉ

---

## ๐ ุญูุงูุฉ ุงูุญุฐู

**ุชู ุงูุชุญูู ูู:**
- โ๏ธ ุงูููุชุฌุงุช ุงูุชู ููุง ุญุฑูุงุช ูุฎุฒูู ูุฌุจ ููุน ุญุฐููุง
- โ๏ธ ุงููุฆุงุช ุงูุชู ุชุญุชูู ุนูู ููุชุฌุงุช ูุฌุจ ููุน ุญุฐููุง
- โ๏ธ ุงููุณุชูุฏุนุงุช ุงููุณุชุฎุฏูุฉ ูู ุงูุญุฑูุงุช ุฃู ุงูุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ ูุฌุจ ููุน ุญุฐููุง

**ููุงุญุธุฉ:** ูุฐู ุงูุชุญุฐูุฑุงุช ูู ุชูุตูุงุช ูููุณุช ุฃุฎุทุงุก. ูุฌุจ ุฅุถุงูุฉ ููุทู ุงูุญูุงูุฉ ูู Views.

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

| ุงูุจูุฏ | ุงูุนุฏุฏ |
|-------|-------|
| ูุณุชูุฏุนุงุช ุชู ุฅูุดุงุคูุง | 3 |
| ูุฆุงุช ุชู ุฅูุดุงุคูุง | 3 |
| ููุชุฌุงุช ููุฒูุงุฆูุฉ | 3 |
| ููุชุฌุงุช ุฎุฏููุฉ | 1 |
| ุญุฑูุงุช ูุฎุฒูู | 2 |
| ูููุฏ ููููุฉ | 2 |
| ูุณุจ ุถุฑูุจุฉ ูุฎุชููุฉ | 4 |
| ุฃุฎุทุงุก ุชู ุฅุตูุงุญูุง | 4 |

---

## ๐ ุงููููุงุช ุงูููุดุฃุฉ/ุงููุนุฏูุฉ

### ูููุงุช ุฌุฏูุฏุฉ:
1. `products/signals.py` - ุฅุดุงุฑุงุช ููุนุงูุฌุฉ ุงูุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ
2. `create_inventory_accounts.py` - ุฅูุดุงุก ุงูุญุณุงุจุงุช ุงููุทููุจุฉ
3. `create_opening_balance_movements.py` - ูุนุงูุฌุฉ ุงูููุชุฌุงุช ุงูููุฌูุฏุฉ
4. `test_inventory_products.py` - ุงุฎุชุจุงุฑ ุฃุณุงุณู
5. `test_inventory_deep_audit.py` - ูุญุต ุนููู

### ูููุงุช ูุนุฏูุฉ:
1. `products/apps.py` - ุฅุถุงูุฉ ุงุณุชูุฑุงุฏ ุงูุฅุดุงุฑุงุช

---

## โ ุงูุชูุตูุงุช

### 1. ุฅุถุงูุฉ ุญูุงูุฉ ุงูุญุฐู ูู Views
ูุฌุจ ุฅุถุงูุฉ checks ูู views ุงูุญุฐู:

```python
def delete_product(request, pk):
    product = get_object_or_404(Product, pk=pk)
    if InventoryMovement.objects.filter(product=product).exists():
        messages.error(request, 'ูุง ูููู ุญุฐู ุงูููุชุฌ ูุฃูู ูุญุชูู ุนูู ุญุฑูุงุช ูุฎุฒูู')
        return redirect('products:product_list')
    # ...
```

### 2. ุฅุถุงูุฉ ุดุงุดุงุช ุชุฃููุฏ ุงูุญุฐู
ูุฌุจ ุฅุถุงูุฉ templates ูุชุฃููุฏ ุงูุญุฐู ูุน ุนุฑุถ ุงูุชุญุฐูุฑุงุช.

### 3. ุงุฎุชุจุงุฑ ุงูุชุญูููุงุช ุจูู ุงููุณุชูุฏุนุงุช
ูุฌุจ ุงุฎุชุจุงุฑ:
- ุชุญููู ููุชุฌ ูู ูุณุชูุฏุน ุฅูู ุขุฎุฑ
- ุงูุชุฃูุฏ ูู ุชุณุฌูู ุงูุญุฑูุงุช ูู ููุง ุงููุณุชูุฏุนูู

### 4. ุงุฎุชุจุงุฑ ุชูููุฉ ุงูุจุถุงุนุฉ ุงููุจุงุนุฉ
ุนูุฏ ุชุณุฌูู ูุงุชูุฑุฉ ุจูุนุ ูุฌุจ:
- ุฎุตู ุงููููุฉ ูู ุงููุฎุฒูู
- ุชุณุฌูู ุชูููุฉ ุงูุจุถุงุนุฉ ุงููุจุงุนุฉ
- ุงุณุชุฎุฏุงู FIFO ูุญุณุงุจ ุงูุชูููุฉ

---

## ๐ฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

โ **ุฌููุน ุงูุฃุฎุทุงุก ุชู ุฅุตูุงุญูุง**  
โ **ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ูุฌุญุช**  
โ **ุงููุธุงู ูุชูุงูู ูุน IFRS**  
โ **ุงูุจูุงูุงุช ูุญููุธุฉ ูููุญูุตุงุช ุงููุงุฏูุฉ**

---

## ๐ ููุงุญุธุงุช

- ุชู ุงูุงุญุชูุงุธ ุจุฌููุน ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ ููุง ุทูุจ ุงููุณุชุฎุฏู
- ูู ูุชู ุฑูุน ุฃู ุดูุก ุนูู ุงูุฑูููุช
- ุฌููุน ุงูุณูุฑูุจุชุงุช ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู ูุณุชูุจูุงู
- ุงููุธุงู ุงูุขู ุฌุงูุฒ ูุงุฎุชุจุงุฑ ุงูุนูููุงุช ุงููุงููุฉ (ููุงุชูุฑ ุงูุจูุน/ุงูุดุฑุงุก)
