<!DOCTYPE html>
<html dir="rtl">
<head>
    <title>Ø§Ø®ØªØ¨Ø§Ø± ØµÙØ­Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<h2>Ø§Ø®ØªØ¨Ø§Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¬Ø§Ù…ÙŠØ¹</h2>

<div>
    <h3>Ø§Ù„Ù…Ø¬Ø§Ù…ÙŠØ¹:</h3>
    <div id="invoice-subtotal-display">1000.000</div>
    <div id="invoice-tax-display">150.000</div>
    <div id="invoice-total-display">1150.000</div>
</div>

<button onclick="testUpdate()">Ø§Ø®ØªØ¨Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ«</button>

<script>
function formatCurrency(value) {
    if (typeof value === 'string') {
        value = parseFloat(value);
    }
    return value.toFixed(3).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

function testUpdate() {
    console.log('ğŸ”„ Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±...');
    
    // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…
    const response = {
        success: true,
        invoice: {
            subtotal: '2000.000',
            tax_amount: '300.000',
            total_amount: '2300.000'
        }
    };
    
    console.log('ğŸ“¦ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©:', response);
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¬Ø§Ù…ÙŠØ¹
    $('#invoice-subtotal-display').text(formatCurrency(response.invoice.subtotal));
    $('#invoice-tax-display').text(formatCurrency(response.invoice.tax_amount));
    $('#invoice-total-display').text(formatCurrency(response.invoice.total_amount));
    
    console.log('âœ… ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«');
}
</script>
</body>
</html>
