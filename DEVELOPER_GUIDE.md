# دليل المطور - تسجيل الأنشطة في النظام

## أهمية تسجيل الأنشطة

يجب تسجيل جميع الأنشطة المهمة في النظام في سجل الأنشطة (AuditLog) لضمان:

1. تتبع جميع العمليات المهمة
2. المساءلة والأمان
3. مراجعة الأنشطة للتحقق من سلامة النظام
4. الامتثال لمتطلبات الأمان

## كيفية تسجيل الأنشطة

### للتعديلات على قاعدة البيانات:
- يتم التسجيل تلقائياً من خلال signals في `core/signals.py`
- يغطي العمليات: create, update, delete, view

### للتعديلات على الملفات (HTML, PO, إلخ):
- يجب إضافة تسجيل يدوي في الكود
- استخدم دالة `log_audit` من `backup/views.py` أو `core/signals.py`

### مثال على التسجيل اليدوي:

```python
from core.signals import log_activity

def my_function(request):
    # ... الكود ...
    log_activity(
        user=request.user,
        action_type='update',
        obj=self,  # أو أي كائن مناسب
        description='تم تحديث ملف الترجمة supplier_list.html'
    )
```

## التعديلات الحالية المسجلة:

1. ✅ تم استبدال النصوص العربية في `supplier_list.html` بـ `{% trans %}`
2. ✅ تم إضافة الترجمات الجديدة في `django.po`
3. ✅ تم تحسين نظام النسخ الاحتياطي ليشمل ملفات الترجمة
4. ✅ تم تحسين نظام الاستعادة لمعالجة ملفات الترجمة

## تذكير للمطورين:

- تأكد دائماً من تسجيل أي تعديلات مهمة في سجل الأنشطة
- استخدم `log_audit` أو `log_activity` للتسجيل
- اختبر التسجيل بعد كل تعديل مهم
- راجع سجل الأنشطة في `/ar/audit-log/` للتأكد من سلامة التسجيل